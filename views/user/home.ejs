<%- include ('../../layout/header.ejs') %>
    <style>
        .errormessage {
            color: red;
            font-size: 0.75 rem;
            display: none;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-toggle {
            cursor: pointer;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .header {
            position: relative;
            z-index: 500;
        }
        .products-container {
        width: 100%;
    }
    
    .row {
        display: flex;
        flex-wrap: wrap;
        margin-right: -15px;
        margin-left: -15px;
    }
    
    .product-item {
        padding-right: 15px;
        padding-left: 15px;
    }
    
    .product {
        height: 100%;
        background: #fff;
    }
    
    .product-media {
        position: relative;
        margin-bottom: 1rem;
    }
    
    .product-image {
        max-width: 100%;
        height: auto;
    }
    
    .product-body {
        padding: 0 1rem 1rem;
    }
    
  
    @media (max-width: 767px) {
        .col-6 {
            flex: 0 0 50%;
            max-width: 50%;
        }
    }
    
    @media (min-width: 768px) {
        .col-md-3 {
            flex: 0 0 25%;
            max-width: 25%;
        }
    }
    </style>
    <style>
        /* Minimal styling for alignment */
        .products-container {
            width: 100%;
        }
        
        .row {
            display: flex;
            flex-wrap: wrap;
            margin-right: -15px;
            margin-left: -15px;
        }
        
        .product-item {
            padding-right: 15px;
            padding-left: 15px;
        }
        
        .product {
            height: 100%;
            background: #fff;
        }
        
        .product-media {
            position: relative;
            margin-bottom: 1rem;
        }
        
        .product-image {
            max-width: 100%;
            height: auto;
        }
        
        .product-body {
            padding: 0 1rem 1rem;
        }
        
        /* Responsive classes */
        @media (max-width: 767px) {
            .col-6 {
                flex: 0 0 50%;
                max-width: 50%;
            }
        }
        
        @media (min-width: 768px) {
            .col-md-3 {
                flex: 0 0 25%;
                max-width: 25%;
            }
        }
        </style>


    <div class="page-wrapper">
        <header class="header header-2 header-intro-clearance">
            <div class="header-top">
                <div class="container">
                    <div class="header-left">
                        <p>Solution for every corner.</p><a href="#">&nbsp;</a>
                    </div><!-- End .header-left -->

                    <div class="header-right">

                        <ul class="top-menu">
                            <li>
                                <a href="#">Links</a>
                                <ul>
                                    <li>
                                        <div class="header-dropdown">

                                        </div>
                                    </li>
                                    <li>
                                        <div class="header-dropdown">
                                            <a href="#"></a>
                                            <div class="header-menu">
                                                <ul>

                                                </ul>
                                            </div><!-- End .header-menu -->
                                        </div>
                                        <div class="header-dropdown">

                                            <div class="header-menu">
                                                <ul>

                                                </ul>
                                            </div><!-- End .header-menu -->
                                        </div>
                                    </li>
                                    <% if (locals.user) { %>
                                        <div class="dropdown">
                                            <a href="#" class="dropdown-toggle">
                                                <%=locals.user.name%>
                                            </a>
                                            <div class="dropdown-content">
                                                <a href="/userDashboard">Profile</a>
                                                <a href="/logout">Logout</a>
                                            </div>
                                        </div>
                                        <% } else { %>
                                            <li><a href="/login"><i class="icon-user"></i>Login</a></li>
                                            <% } %>
                                </ul>
                            </li>
                        </ul><!-- End .top-menu -->
                    </div><!-- End .header-right -->

                </div><!-- End .container -->
            </div><!-- End .header-top -->

            <div class="header-middle">
                <div class="container">
                    <div class="header-left">
                        <button class="mobile-menu-toggler">
                            <span class="sr-only">Toggle mobile menu</span>
                            <i class="icon-bars"></i>
                        </button>

                        <a href="index.html" class="logo">
                            <img src="assets/images/wonder.png" alt="Molla Logo" width="105" height="25">
                        </a>
                    </div>

                    <div class="header-center">
                        <div class="header-search header-search-extended header-search-visible d-none d-lg-block">
                            <a href="#" class="search-toggle" role="button"><i class="icon-search"></i></a>
                            <form action="#" method="get">
                                <div class="header-search-wrapper search-wrapper-wide">
                                    <label for="q" class="sr-only">Search</label>
                                    <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
                                    <input type="search" class="form-control" name="q" id="q"
                                        placeholder="Search product ..." required>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="header-right">
                        <div class="dropdown compare-dropdown">
                            <a href="/wallet" class="dropdown-toggle" role="button" >
                                <div class="icon">
                                    <i class="fa-solid fa-wallet" style="color: #000000;"></i>
                                </div>
                                <p>Wallet</p>
                            </a>
                        </div>


                        <div class="wishlist">
                            <a href="/wishlist" title="Wishlist">
                                <div class="icon">
                                    <i class="icon-heart-o"></i>

                                </div>
                                <p>Wishlist</p>
                            </a>
                        </div>

                        <div class="dropdown cart-dropdown">
                            <a href="/cart" class="dropdown-toggle">

                                <div class="icon">
                                    <i class="icon-shopping-cart"></i>
                                    
                                </div>
                                <p>Cart</p>
                            </a>


                        </div>
                    </div>
                </div>
            </div>
            <div class="header-bottom sticky-header">
                <div class="container">
                    <div class="header-left">
                        <div class="dropdown category-dropdown">
                           

                            
                        </div><!-- End .category-dropdown -->
                    </div><!-- End .header-left -->

                    <div class="header-center">
                        <nav class="main-nav">
                            <ul class="menu sf-arrows">
                                <li class="megamenu-container active">
                                    <a href="/" class="sf-with-ul">Home</a>


                                </li>
                                <li>
                                    <a href="/productList" class="sf-with-ul">Shop</a>


                                </li>


                                <li>



                                </li>

                            </ul><!-- End .menu -->
                        </nav><!-- End .main-nav -->
                    </div><!-- End .header-center -->

                    <div class="header-right">
                        <i class="la la-lightbulb-o"></i>
                        <p>Clearance<span class="highlight">&nbsp;Up to 30% Off</span></p>
                    </div>
                </div><!-- End .container -->
            </div><!-- End .header-bottom -->
        </header><!-- End .header -->

        <main class="main">
            <div class="intro-slider-container mb-5">
                <div class="intro-slider owl-carousel owl-theme owl-nav-inside owl-light" data-toggle="owl"
                    data-owl-options='{
                    "dots": true,
                    "nav": false, 
                    "responsive": {
                        "1200": {
                            "nav": true,
                            "dots": false
                        }
                    }
                }'>
                    <div class="hero" style="height: 650px; padding: 80px 0;">
                        <div class="container">
                            <div class="row justify-content-between">
                                <div class="col-lg-5">
                                    <div class="intro-excerpt">
                                        <h1>Modern Interior <span class="d-block">Design Studio</span></h1>
                                        <p class="mb-4"> premium furnitures you can purchase here , here ghj ghj yuuks
                                            lkkjhv bnmk uwijks</p>
                                        <p><a href="/productList" class="btn btn-secondary me-2"
                                                style="border-radius: 30px; font-weight:16px; ">Shop Now</a><a href="#"
                                                class="btn btn-white-outline" style="border-radius: 30px;">Explore</a>
                                        </p>
                                    </div>
                                </div>
                                <div class="col-lg-7">
                                    <div class="hero-img-wrap">
                                        <img src="/assets/images/couch.png" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>





                </div>
            </div>
    </div>
    <div class="mb-6"></div>

    <div class="container">
        <div class="heading heading-center mb-3">
            <h2 class="title-lg">Trendy Products</h2>
        </div>
    
        <div class="products-container">
            <div class="row">
                <div class="products mb-3 col-lg-12">
                    <div class="row" id="productList">
                        <% products.forEach((items)=> { %>
                            <div class="col-6 col-md-3 col-lg-3 mb-4 product-item" 
                                data-category="<%= items.category %>" 
                                data-price="<%= items.price %>"
                                data-name="<%= items.productName %>">
                                <div class="product product-7 text-center">
                                    <figure class="product-media">
                                        <a href="/productDetails/<%= items._id %>">
                                            <img src="uploads/<%= items.productImage[0] %>"
                                                alt="Product image" class="product-image">
                                        </a>
                                        <div class="product-action-vertical">
                                            <a href="#" class="btn-product-icon btn-wishlist btn-expandable"
                                                data-product-id="<%= items._id %>">
                                                <span>Add to wishlist</span>
                                            </a>
                                        </div>
                                        <div class="product-action">
                                            <% if (locals.user) { %>
                                                <% if(items.quantity==0){ %>
                                                    <span class="btn-product">Out of stock</span>
                                                <% } else { %>
                                                    <a href="/productDetails/<%= items._id %>" class="btn-product "
                                                        >
                                                        <span>+ Explore</span>
                                                    </a>
                                                <% } %>
                                            <% } else { %>
                                                <a href="/login" class="btn-product btn-login">
                                                    <span>Login</span>
                                                </a>
                                            <% } %>
                                        </div>
                                    </figure>
    
                                    <div class="product-body">
                                        <h3 class="product-title">
                                            <a href="product.html"><%= items.productName %></a>
                                        </h3>
                                        
                                        <div class="product-price">
                                            <% if (items.offer) { %>
                                                <div>
                                                    <span class="old-price">₹<%= items.originalPrice ? items.originalPrice.toFixed(2) : 'N/A' %></span>
                                                    <span class="new-price">₹<%= items.discountedPrice ? items.discountedPrice.toFixed(2) : 'N/A' %></span>
                                                </div>
                                               
                                            <% } else { %>
                                                <span class="price">₹<%= items.price ? items.price.toFixed(2) : 'N/A' %></span>
                                            <% } %>
                                        </div>
                                        <div class="ratings-container">
                                            <div class="ratings">
                                                <div class="ratings-val" style="width: 0%;"></div>
                                               
                                            </div><!-- End .ratings -->
                                            <span class="ratings-text">( 0 Reviews )</span>
                                        </div><!-- End .rating-container -->
                                    </div>
                                </div>
                            </div>
                        <% }); %>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    


    <div class="mb-5"></div><!-- End .mb-6 -->




    <div class="container">
        <hr>
        <div class="row justify-content-center">
            <div class="col-lg-4 col-sm-6">
                <div class="icon-box icon-box-card text-center">
                    <span class="icon-box-icon">
                        <i class="icon-rocket"></i>
                    </span>
                    <div class="icon-box-content">
                        <h3 class="icon-box-title">Payment & Delivery</h3><!-- End .icon-box-title -->
                        <p>Free shipping for orders over $50</p>
                    </div><!-- End .icon-box-content -->
                </div><!-- End .icon-box -->
            </div><!-- End .col-lg-4 col-sm-6 -->

            <div class="col-lg-4 col-sm-6">
                <div class="icon-box icon-box-card text-center">
                    <span class="icon-box-icon">
                        <i class="icon-rotate-left"></i>
                    </span>
                    <div class="icon-box-content">
                        <h3 class="icon-box-title">Return & Refund</h3><!-- End .icon-box-title -->
                        <p>Free 100% money back guarantee</p>
                    </div><!-- End .icon-box-content -->
                </div><!-- End .icon-box -->
            </div><!-- End .col-lg-4 col-sm-6 -->

            <div class="col-lg-4 col-sm-6">
                <div class="icon-box icon-box-card text-center">
                    <span class="icon-box-icon">
                        <i class="icon-life-ring"></i>
                    </span>
                    <div class="icon-box-content">
                        <h3 class="icon-box-title">Quality Support</h3><!-- End .icon-box-title -->
                        <p>Alway online feedback 24/7</p>
                    </div><!-- End .icon-box-content -->
                </div><!-- End .icon-box -->
            </div><!-- End .col-lg-4 col-sm-6 -->
        </div><!-- End .row -->

        <div class="mb-2"></div><!-- End .mb-2 -->
    </div><!-- End .container -->
    <div class="blog-posts pt-7 pb-7" style="background-color: #fafafa;">
        <div class="container">
            <h2 class="title-lg text-center mb-3 mb-md-4">From Our Blog</h2>
            <!-- End .title-lg text-center -->

            <div class="owl-carousel owl-simple carousel-with-shadow" data-toggle="owl" data-owl-options='{
                            "nav": false, 
                            "dots": true,
                            "items": 3,
                            "margin": 20,
                            "loop": false,
                            "responsive": {
                                "0": {
                                    "items":1
                                },
                                "600": {
                                    "items":2
                                },
                                "992": {
                                    "items":3
                                }
                            }
                        }'>
                <article class="entry entry-display">
                    <figure class="entry-media">
                        <a href="single.html">
                            <img src="assets/images/blog/home/post-1.jpg" alt="image desc">
                        </a>
                    </figure><!-- End .entry-media -->

                    <div class="entry-body pb-4 text-center">
                        <div class="entry-meta">
                            <a href="#">Nov 22, 2018</a>, 0 Comments
                        </div><!-- End .entry-meta -->

                        <h3 class="entry-title">
                            <a href="single.html">Sed adipiscing ornare.</a>
                        </h3><!-- End .entry-title -->

                        <div class="entry-content">
                            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus
                                hendrerit.<br>Pelletesque aliquet nibh necurna. </p>
                            <a href="single.html" class="read-more">Read More</a>
                        </div><!-- End .entry-content -->
                    </div><!-- End .entry-body -->
                </article><!-- End .entry -->

                <article class="entry entry-display">
                    <figure class="entry-media">
                        <a href="single.html">
                            <img src="assets/images/blog/home/post-2.jpg" alt="image desc">
                        </a>
                    </figure><!-- End .entry-media -->

                    <div class="entry-body pb-4 text-center">
                        <div class="entry-meta">
                            <a href="#">Dec 12, 2018</a>, 0 Comments
                        </div><!-- End .entry-meta -->

                        <h3 class="entry-title">
                            <a href="single.html">Fusce lacinia arcuet nulla.</a>
                        </h3><!-- End .entry-title -->

                        <div class="entry-content">
                            <p>Sed pretium, ligula sollicitudin laoreet<br>viverra, tortor libero sodales
                                leo, eget blandit nunc tortor eu nibh. Nullam mollis justo. </p>
                            <a href="single.html" class="read-more">Read More</a>
                        </div><!-- End .entry-content -->
                    </div><!-- End .entry-body -->
                </article><!-- End .entry -->

                <article class="entry entry-display">
                    <figure class="entry-media">
                        <a href="single.html">
                            <img src="assets/images/blog/home/post-3.jpg" alt="image desc">
                        </a>
                    </figure><!-- End .entry-media -->

                    <div class="entry-body pb-4 text-center">
                        <div class="entry-meta">
                            <a href="#">Dec 19, 2018</a>, 2 Comments
                        </div><!-- End .entry-meta -->

                        <h3 class="entry-title">
                            <a href="single.html">Quisque volutpat mattis eros.</a>
                        </h3><!-- End .entry-title -->

                        <div class="entry-content">
                            <p>Suspendisse potenti. Sed egestas, ante et vulputate volutpat, eros pede
                                semper est, vitae luctus metus libero eu augue. </p>
                            <a href="single.html" class="read-more">Read More</a>
                        </div><!-- End .entry-content -->
                    </div><!-- End .entry-body -->
                </article><!-- End .entry -->
            </div><!-- End .owl-carousel -->
        </div><!-- container -->

        <div class="more-container text-center mb-0 mt-3">
            <a href="blog.html" class="btn btn-outline-darker btn-more"><span>View more articles</span><i
                    class="icon-long-arrow-right"></i></a>
        </div><!-- End .more-container -->
    </div>
    <div class="cta cta-display bg-image pt-4 pb-4"
        style="background-image: url(assets/images/backgrounds/cta/bg-6.jpg);">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-10 col-lg-9 col-xl-8">
                    <div class="row no-gutters flex-column flex-sm-row align-items-sm-center">
                        <div class="col">
                            <h3 class="cta-title text-white">Sign Up & Get 10% Off</h3>
                            <!-- End .cta-title -->
                            <p class="cta-desc text-white">Molla presents the best in interior design</p>
                            <!-- End .cta-desc -->
                        </div><!-- End .col -->

                        <div class="col-auto">
                            <a href="login.html" class="btn btn-outline-white"><span>SIGN UP</span><i
                                    class="icon-long-arrow-right"></i></a>
                        </div><!-- End .col-auto -->
                    </div><!-- End .row no-gutters -->
                </div><!-- End .col-md-10 col-lg-9 -->
            </div><!-- End .row -->
        </div><!-- End .container -->
    </div><!-- End .cta -->
    </main><!-- End .main -->

    <footer class="footer footer-dark">
        <div class="footer-middle">
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-lg-3">
                        <div class="widget widget-about">

                            <p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu vulputate
                                magna eros eu erat. </p>

                            <div class="social-icons">
                                <a href="#" class="social-icon" title="Facebook" target="_blank"><i
                                        class="icon-facebook-f"></i></a>
                                <a href="#" class="social-icon" title="Twitter" target="_blank"><i
                                        class="icon-twitter"></i></a>
                                <a href="#" class="social-icon" title="Instagram" target="_blank"><i
                                        class="icon-instagram"></i></a>
                                <a href="#" class="social-icon" title="Youtube" target="_blank"><i
                                        class="icon-youtube"></i></a>
                                <a href="#" class="social-icon" title="Pinterest" target="_blank"><i
                                        class="icon-pinterest"></i></a>
                            </div><!-- End .soial-icons -->
                        </div><!-- End .widget about-widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">Useful Links</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="about.html">About Molla</a></li>
                                <li><a href="#">How to shop on Molla</a></li>
                                <li><a href="#">FAQ</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                                <li><a href="login.html">Log in</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="#">Payment Methods</a></li>
                                <li><a href="#">Money-back guarantee!</a></li>
                                <li><a href="#">Returns</a></li>
                                <li><a href="#">Shipping</a></li>
                                <li><a href="#">Terms and conditions</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">My Account</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="#">Sign In</a></li>
                                <li><a href="cart.html">View Cart</a></li>
                                <li><a href="#">My Wishlist</a></li>
                                <li><a href="#">Track My Order</a></li>
                                <li><a href="#">Help</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->
                </div><!-- End .row -->
            </div><!-- End .container -->
        </div><!-- End .footer-middle -->

        <div class="footer-bottom">
            <div class="container">
                <p class="footer-copyright">Copyright © 2019 Molla Store. All Rights Reserved.</p>
                <!-- End .footer-copyright -->
                <figure class="footer-payments">
                    <img src="assets/images/payments.png" alt="Payment methods" width="272" height="20">
                </figure><!-- End .footer-payments -->
            </div><!-- End .container -->
        </div><!-- End .footer-bottom -->
    </footer><!-- End .footer -->
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

    <!-- Mobile Menu -->
    <div class="mobile-menu-overlay"></div><!-- End .mobil-menu-overlay -->

    <div class="mobile-menu-container">
        <div class="mobile-menu-wrapper">
            <span class="mobile-menu-close"><i class="icon-close"></i></span>

            <form action="#" method="get" class="mobile-search">
                <label for="mobile-search" class="sr-only">Search</label>
                <input type="search" class="form-control" name="mobile-search" id="mobile-search"
                    placeholder="Search in..." required>
                <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
            </form>

            <nav class="mobile-nav">
                <ul class="mobile-menu">
                    <li class="active">
                        <a href="index.html">Home</a>


                    </li>
                    <li>
                        <a href="category.html">Product</a>

                    </li>
                    <li>
                        <a href="/productList" class="sf-with-ul">Shop</a>

                    </li>


                    <li>


                    </li>
                </ul>
            </nav><!-- End .mobile-nav -->

            <div class="social-icons">
                <a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
            </div><!-- End .social-icons -->
        </div><!-- End .mobile-menu-wrapper -->
    </div><!-- End .mobile-menu-container -->

    <!-- Sign in / Register Modal -->
   

                                </div><!-- End .modal-body -->
                            </div><!-- End .modal-content -->
                        </div><!-- End .modal-dialog -->
                    </div><!-- End .modal -->


                    <!-- Plugins JS File -->
                    <script src="/assets/js/jquery.min.js"></script>
                    <script src="/assets/js/bootstrap.bundle.min.js"></script>
                    <script src="/assets/js/jquery.hoverIntent.min.js"></script>
                    <script src="/assets/js/jquery.waypoints.min.js"></script>
                    <script src="/assets/js/superfish.min.js"></script>
                    <script src="/assets/js/owl.carousel.min.js"></script>
                    <script src="/assets/js/jquery.magnific-popup.min.js"></script>
                    <!-- Main JS File -->
                    <script src="/assets/js/main.js"></script>





                    <script>
                        document.addEventListener('DOMContentLoaded', () => {
                            const categoryLinks = document.querySelectorAll('.category-link');
                            const productItems = document.querySelectorAll('.product-item');
                    
                            categoryLinks.forEach(link => {
                                link.addEventListener('click', (e) => {
                                    e.preventDefault(); // Prevent default link behavior
                                    const selectedCategory = link.getAttribute('data-category-id');
                    
                                    productItems.forEach(item => {
                                        const productCategory = item.getAttribute('data-category');
                                        
                                        if (selectedCategory === productCategory || selectedCategory === 'all') {
                                            item.style.display = 'block';
                                        } else {
                                            item.style.display = 'none';
                                        }
                                    });
                                });
                            });
                        });
                    </script>
                    

                    <%- include ('../../layout/footer.ejs') %>